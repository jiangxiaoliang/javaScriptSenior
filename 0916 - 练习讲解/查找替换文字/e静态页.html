<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css">
</head>

<body>
    <div id="box">
        <div id="content">
            目前主要针对的是javascript培训，同时还提供了css教程、javascript视频、js特效等，最新推出了外地学员们喜欢的javascript网络课程服务，同时还为处于javascript入门阶段的朋友录制了大量javascript视频，其中涉及了大量javascript基础知识，希望妙味课堂推出的javascript网络培训课程能带给大家更多惊喜。目前主要针对的是javascript培训，同时还提供了css教程、javascript视频、js特效等，最新推出了外地学员们喜欢的javascript网络课程服务，同时还为处于javascript入门阶段的朋友录制了大量javascript视频，其中涉及了大量javascript基础知识，希望妙味课堂推出的javascript网络培训课程能带给大家更多惊喜。目前主要针对的是javascript培训，
        </div>
        <div id="open">
            <a href="javascript:;">展开</a>
            <ul style="display: none;">
                <li><a href="javascript:;">查找</a></li>
                <li><a href="javascript:;">替换</a></li>
            </ul>
        </div>
        <div id="fun">
            <div class="btns">
                <a href="javascript:;" class="active" style="display: none;">查找</a>
                <a href="javascript:;" style="display: none;">替换</a>
            </div>

            <div id="search" style="display: none">
                <input type="text" />
                <input type="button" value="" />
            </div>
            <div id="replace" style="display: none;">
                <input type="text" />
                <input type="text" />
                <input type="button" value="" />
            </div>
        </div>

    </div>
<script type="text/javascript">
function $(cssSelector, parent) {
    var parent = parent || document
    var els = parent.querySelectorAll(cssSelector)
    return els.length > 1 ? els : els[0]
}
(function() {
    var open = $('#open a')
    var ul = $('#open ul')
    var btns = $('.btns a')
    var search = $('#search')
    var replace = $('#replace')
    var content = $('#content')
    var orgContent = ''
    open[0].onclick = function() {
        ul.style.display = 'block'
        open[1].onclick = function() {
            btns[1].style.display = 'none'
            replace.style.display = 'none'
            btns[0].style.display = 'block'
            search.style.display = 'block'
            $('input[type=button]', search).onclick = function() {
                if(orgContent) {
                    content.innerHTML = orgContent
                }
                var searchEl = $('input[type=text]', search)
                var searcheTxt = searchEl.value
                var contentTxt = content.innerHTML
                orgContent = contentTxt
                if (!searcheTxt.trim()) {
                    alert('请输入查找内容')
                    searchEl.focus()
                    return
                }
                console.log(searcheTxt)
                console.log(contentTxt)
                content.innerHTML = contentTxt.split(searcheTxt).join('<span>'+ searcheTxt + '</span>')
                searchEl.value = ''
            }
        }
        open[2].onclick = function() {
            btns[0].style.display = 'none'
            search.style.display = 'none'
            btns[1].style.display = 'block'
            replace.style.display = 'block'
            $('input[type=button]', replace).onclick = function() {
                // if(orgContent) {
                //     content.innerHTML = orgContent
                // }
                var replaceTxtEl = $('input[type=text]', replace)
                var contentTxt = content.innerHTML
                orgContent = contentTxt
                if (!replaceTxtEl[0].value.trim() || !replaceTxtEl[0].value.trim()) {
                    alert('请输入替换内容')
                    replaceTxtEl[0].focus()
                    return
                }
                content.innerHTML = contentTxt.split(replaceTxtEl[0].value).join('<span>'+ replaceTxtEl[1].value + '</span>')
                replaceTxtEl[0].value = ''
                replaceTxtEl[1].value = ''
            }
        }
    }
})()
</script>
</body>
</html>
