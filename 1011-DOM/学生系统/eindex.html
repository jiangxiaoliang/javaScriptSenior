<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel='stylesheet' href="./eindex.css">
</head>
<body>
    <div class='wrap'>
        <div id='form'>
            <p>姓名<input id='username' type='text' value='jxl' /></p>
            <p>年龄<input id='age' type='text' value='18' /></p>
            <p>性别
                <select id='gender'>
                    <option>男</option>
                    <option>女</option>
                    <option>保密</option>
                </select>
            </p>
            <p><input type='button' value='添加' id='addBtn' /></p>
        </div>
        <table id='table'>
            <thead>
                <tr>
                    <th>
                        <label>
                            <input type='checkbox' id='checkAll' />全选
                        </label>
                    </th>
                    <th>
                        id
                    </th>
                    <th>姓名</th>
                    <th>年龄</th>
                    <th>性别</th>
                    <th>操作</th>
                    <th><a href="javascript:;" id="removeChecked">删除</a></th>
                </tr>
            </thead>
            <tbody>
                <!-- <tr>
                    <td>1</td>
                </tr>
                <tr>
                    <td>2</td>
                </tr> -->
            </tbody>
        </table>
    </div>
    <script>
        {
            let addBtn = document.querySelector("#addBtn");
            let usernameEL = document.querySelector("#username");
            let ageEl = document.querySelector("#age");
            let genderEl = document.querySelector("#gender");
            let id = 1;
            let table = document.querySelector("#table");
            let tbody = table.tBodies[0];
            let checkAll = document.querySelector("#checkAll");
            let removeChecked = document.querySelector("#removeChecked");

            addBtn.onclick = () => {
                let username = usernameEL.value
                let age = ageEl.value
                let gender = genderEl.value
                let newTr = document.createElement('tr')

                // 第一个单元格
                let ceil1 = document.createElement('th')
                let checkbox = document.createElement('input')
                checkbox.setAttribute('type', 'checkbox')
                checkbox.onclick = () => {
                    checkAll.checked = isCheckAll()
                }
                ceil1.appendChild(checkbox)
                newTr.appendChild(ceil1)

                // 第二个单元格
                let ceil2 = document.createElement('th')
                ceil2.innerHTML = id
                newTr.appendChild(ceil2)

                // 第三个单元格
                let ceil3 = document.createElement('th')
                ceil3.innerHTML = username
                newTr.appendChild(ceil3)

                // 第四个单元格
                let ceil4 = document.createElement('th')
                ceil4.innerHTML = age
                newTr.appendChild(ceil4)

                // 第五个单元格
                let ceil5 = document.createElement('th')
                ceil5.innerHTML = gender
                newTr.appendChild(ceil5)
                
                // 第六个
                let ceil6 = document.createElement('th')
                let a1 = document.createElement('a')
                let a2 = document.createElement('a')
                a1.innerHTML = '↑'
                a2.innerHTML = '↓'
                ceil6.appendChild(a1)
                ceil6.appendChild(a2)
                newTr.appendChild(ceil6)

                // 第七个
                let ceil7 = document.createElement('th')
                let ceil7A = document.createElement('a')
                ceil7A.innerHTML = '删除'
                ceil7.appendChild(ceil7A)
                newTr.appendChild(ceil7)

                id++
                tbody.appendChild(newTr)
                checkAll.checked = isCheckAll()
                // console.log(tbody.rows[0].cells[0].children)
            }

            
            function isCheckAll() {
                return [...tbody.rows].every(item => item.cells[0].children[0].checked)
            }

            checkAll.onchange = () => {
                [...tbody.rows].forEach(item => {
                    item.cells[0].children[0].checked = checkAll.checked
                })
            }
        }
    </script>
</body>
</html>